<?php
    use Phalcon\Filter;
?>
<section class="content-header" style="height:auto;">
    <h1>
        <?= $t->_("allowance"); ?>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> <?= $t->_("home"); ?></a></li>
        <li class="active"><?= $t->_("allowance"); ?></li>
    </ol>
</section>

<!-- Main content -->
<section class="content">

    <div class="row">
        <div class="col-md-12"><!--start table content--->
             <?php $this->flashSession->output()?>
            <form id='TextBoxesGroup' action='saveallowance'>
                <div id="TextBoxDiv1">
         
                    <?= $t->_("allowance_name");?> 1 :  <input style="margin-top:10px;" type='text' id='textbox1' name='textbox1' placeholder="<?= $t->_("enter_allname");?>" >
                    <?= $t->_("amount");?> 1 : <input style="margin-top:10px;" type='text' id='txt1' name='txt1' placeholder="<?= $t->_("enter_allamount");?>">
                    <input type='button' value='+' id='addButton'>
                    <input type='button' value='-' id='removeButton'>
                    <input type='submit' class="buttonn" value='Add' id='alladd'>

                </div>
            </form>


            <table class="listtbl">
                <thead>
                    <tr>
                        <th><?= $t->_("no"); ?></th>
                        <th><?= $t->_("allowance"); ?> <?= $t->_("name");?></th>
                        <th><?= $t->_("allowance"); ?> <?= $t->_("amount");?></th>
                        <th width="30px"></th>
                    </tr>

                </thead>
                <tbody>
                <?php
                 $filter = new Filter();
                $n=0;
                foreach ($list   as $result) {$n++;
                    ?><tr>
                        <td><?php echo $n; ?></td>
                        <td><?php echo $filter->sanitize($result['allowance_name'],"string");?></td>
                        <td><?php echo number_format($filter->sanitize($result['allowance_amount'],"int"));?></td>
<!--                        <td><input type="button" class="btn btn-default allpopup" onclick="return false;" id="<?= $result['allowance_id'] ?>" value="Edit"></td>-->
                         <td>
                               <a href="#" onclick="return false;" style="float:right;" class="inedit allpopup" id="<?= $result['allowance_id']  ?>"></a>
                         </td>
                      </tr>
                 <?php
                }
                ?>
                </tbody>
            </table>      
        </div><!--end table content--->
    </div><!-- /.row -->

</section><!-- /.content -->

<div id="confirm" class="navbar"></div>
<div id="edit_all_dia"></div>



<script type="text/javascript">

    $(document).ready(function () {
        var allowance_name='<?= $t->_("allowance_name");?>';
        var allowance_amount='<?= $t->_("amount");?>';
        var enter_allname='<?= $t->_("enter_allname");?>';
        var enter_allamount='<?= $t->_("enter_allamount");?>';
        var counter = 2;
        var counter1=2;
        $("#addButton").click(function () {

            if (counter > 10) {
                alert("Only 10 textboxes allow");
                return false;
            }
           
            var newTextBoxDiv = $(document.createElement('div'))
                    .attr("id", 'TextBoxDiv' + counter);

            newTextBoxDiv.after().html('' + allowance_name+' '+counter + ' :  ' +
                    ' <input style="margin-top:10px;" type="text" name="textbox' + counter +
                    '" id="textbox' + counter + '" value="" placeholder="'+enter_allname+'"> ' + allowance_amount+' '+counter + ' : ' +
                    ' <input style="margin-top:10px;" type="text" name="txt' + counter +
                    '" id="txt' + counter + '" value=""  placeholder="'+enter_allamount+'">');

            newTextBoxDiv.appendTo("#TextBoxesGroup");


            counter++;
        });

        $("#removeButton").click(function () {
            if (counter == 2) {
                alert("No more textbox to remove");
                return false;
            }

            counter--;

            $("#TextBoxDiv" + counter).remove();

        });
        
        $("#getButtonValue").click(function () {
            alert(counter);
//window.location.href = baseUri + 'salary/index/saveallowance?count='+counter;
//            var msg = '';
//            for (i = 1; i < counter; i++) {
//                msg += "\n Textbox #" + i + " : " + $('#textbox' + i).val();
//                msg += "\n Textbox #" + i + " : " + $('#txt' + i).val();
//            }
//          
//            alert(msg);
        });

    });
</script>

